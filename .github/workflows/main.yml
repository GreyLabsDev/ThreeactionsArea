name: "Web - Build and Publish"
on:
  push:
    branches:
    - main
jobs:
  build-and-deploy:
    name: Build Web
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4

    - name: Set up Flutter
      uses: subosito/flutter-action@v2
      with:
        channel: stable

    - name: Build the Flutter web application
      shell: bash
      run: |
        flutter pub get
        flutter build web --release --base-href "/ThreeactionsArea/"

    - name: Deploy to GitHub pages
      shell: bash
      run: |
        git add build/web/ -f
        git commit -m "Deploy Flutter Web Application"
        git push origin $(git subtree split --prefix=build/web/):main -f